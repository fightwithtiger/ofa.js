<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>index1</title>
    <script src="../../../dist/ofa.js"></script>
    <script src="../frame-app.js"></script>
</head>

<body>
    <div>
        <div>
            <input type="text" id="msg_inpuer" value="start">
            <button onclick="postdata()">发送数据</button>
        </div>
    </div>
    <div id="consoler" style="margin:20px 0 100px;">接收到的数据↓</div>

    <frame-app src="../../../libtest/opentest/frameApp.html" initial="I am initial data" id="targetApp"
        style="width:400px;height:600px;border:#aaa solid 1px;"></frame-app>
    <script>
        // 确保 frame-app 组件初始化模块加载完成
        // $.tag("frame-app").then(e => {
        //     $("frame-app").initial = {
        //         val: "i am initial data"
        //     };
        // })
        
        let count = 1;
        function postdata() {
            $("#targetApp").post($("#msg_inpuer").value);
            $("#msg_inpuer").value = 'start! ' + count++;
        }

        $("#targetApp").on("message", e => {
            $("#consoler").html += `<div>${e.data}</div>`;
        });
    </script>

</body>

</html>